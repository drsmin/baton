<!DOCTYPE html>
<html>
    <head>
        <title>이미지 등록</title>
        <% include sys/inc/_jscss %>
        <link rel='stylesheet' href='/css/stickyFooter.css' /> 
        <link rel='stylesheet' href='/css/cropper.min.css' /> 
        <script src="/js/cropper.min.js"></script>
        <script type="text/javascript">
            $(function() {
                $("button.close").click(function () {
                    window.self.close();
                });
                
                  var $image = $("#previewImage");
                  var $input = $("[name='croppResult']");
                
                  $("input:file").change(function() {
                    var oFReader = new FileReader();
                
                    oFReader.readAsDataURL(this.files[0]);
                
                    oFReader.onload = function (oFREvent) {
                
                      // Destroy the old cropper instance
                      $image.cropper('destroy');
                
                      // Replace url
                      $image.attr('src', this.result);
                
                      // Start cropper
                      $image.cropper({
                        aspectRatio: 1,
                        movable: false,
                        zoomable: false,
                        rotatable: false,
                        scalable: false,
                        crop: function(e) {
                          $input.val(e.x + ", " + e.y +"," + e.width + "," + e.height);
                        }
                      });
                    };
                  });
            });
        </script>
    </head>
<body>

    <header>
        <!-- Fixed navbar -->
        <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
            <a class="navbar-brand" href="">이미지 등록</a>
            <button type="button" class="close bg-light" aria-label="Close">
                <span aria-hidden="true">&times;</span>
            </button>
        </nav>
    </header>

    <!-- Begin page content -->
    <main role="main" class="container">
        <h2>이미지 등록</h2>
        <form method="POST">
            <input type="file"/>
            <img id="previewImage" src="" alt="Picture">
            <input type="text" name="croppResult" />
        </form>
    </main>

    <footer class="footer">
        <div class="container text-center">
            <div class="col-sm">
                <button type="button" class="btn btn-primary">등록</button>
                <button type="button" class="btn btn-secondary">취소</button>
            </div>
        </div>
    </footer>
</body>
</html>